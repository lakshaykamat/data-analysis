# Rank Functions

# SQL Rank Functions

SQL provides several ranking functions to assign rankings to rows based on specific criteria. These functions are commonly used in data analysis and analytical queries.

## 1. ROW_NUMBER()

Assigns a unique sequential integer to rows within a partition of a dataset, starting at 1.

### Syntax

```sql
ROW_NUMBER() OVER (PARTITION BY column_name ORDER BY column_name)
```

### Example

```sql
SELECT EmployeeID, Department, Salary,
       ROW_NUMBER() OVER (PARTITION BY Department ORDER BY Salary DESC) AS RowNum
FROM Employees;

```

| EmployeeID | Department | Salary | RowNum |
| --- | --- | --- | --- |
| 1 | HR | 5000 | 1 |
| 2 | HR | 4500 | 2 |
| 3 | IT | 7000 | 1 |
| 4 | IT | 6500 | 2 |

---

## 2. RANK()

Assigns a rank to each row within a partition, with gaps in rank when there are ties.

### Syntax

```sql
RANK() OVER (PARTITION BY column_name ORDER BY column_name)

```

### Example

```sql
SELECT EmployeeID, Department, Salary,
       RANK() OVER (PARTITION BY Department ORDER BY Salary DESC) AS Rank
FROM Employees;

```

| EmployeeID | Department | Salary | Rank |
| --- | --- | --- | --- |
| 1 | HR | 5000 | 1 |
| 2 | HR | 4500 | 2 |
| 3 | IT | 7000 | 1 |
| 4 | IT | 6500 | 2 |

---

## 3. DENSE_RANK()

Assigns a rank to each row within a partition, with no gaps in rank when there are ties.

### Syntax

```sql
DENSE_RANK() OVER (PARTITION BY column_name ORDER BY column_name)

```

### Example

```sql
SELECT EmployeeID, Department, Salary,
       DENSE_RANK() OVER (PARTITION BY Department ORDER BY Salary DESC) AS DenseRank
FROM Employees;

```

| EmployeeID | Department | Salary | DenseRank |
| --- | --- | --- | --- |
| 1 | HR | 5000 | 1 |
| 2 | HR | 4500 | 2 |
| 3 | IT | 7000 | 1 |
| 4 | IT | 6500 | 2 |

---

## 4. NTILE(n)

Divide the result set into `n` approximately equal parts and assign a number (bucket) to each row.

### Syntax

```sql
NTILE(n) OVER (PARTITION BY column_name ORDER BY column_name)

```

### Example

```sql
SELECT EmployeeID, Department, Salary,
       NTILE(2) OVER (PARTITION BY Department ORDER BY Salary DESC) AS Bucket
FROM Employees;

```

| EmployeeID | Department | Salary | Bucket |
| --- | --- | --- | --- |
| 1 | HR | 5000 | 1 |
| 2 | HR | 4500 | 2 |
| 3 | IT | 7000 | 1 |
| 4 | IT | 6500 | 2 |

---

## 5. CUME_DIST()

Calculates the cumulative distribution of a row within a partition. The value ranges from 0 to 1.

### Syntax

```sql
CUME_DIST() OVER (PARTITION BY column_name ORDER BY column_name)

```

### Example

```sql
SELECT EmployeeID, Department, Salary,
       CUME_DIST() OVER (PARTITION BY Department ORDER BY Salary DESC) AS CumulativeDistribution
FROM Employees;

```

| EmployeeID | Department | Salary | CumulativeDistribution |
| --- | --- | --- | --- |
| 1 | HR | 5000 | 1.0 |
| 2 | HR | 4500 | 1.0 |
| 3 | IT | 7000 | 0.5 |
| 4 | IT | 6500 | 1.0 |

---

## 6. PERCENT_RANK()

Calculates the relative rank of a row as a percentage of the total rows in the partition. The value ranges from 0 to 1.

### Syntax

```sql
PERCENT_RANK() OVER (PARTITION BY column_name ORDER BY column_name)

```

### Example

```sql
SELECT EmployeeID, Department, Salary,
       PERCENT_RANK() OVER (PARTITION BY Department ORDER BY Salary DESC) AS PercentRank
FROM Employees;

```

| EmployeeID | Department | Salary | PercentRank |
| --- | --- | --- | --- |
| 1 | HR | 5000 | 0.0 |
| 2 | HR | 4500 | 1.0 |
| 3 | IT | 7000 | 0.0 |
| 4 | IT | 6500 | 1.0 |